{"version":3,"file":"view.js","mappings":"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","sources":["webpack://helldivers-2-major-order/./src/view.js"],"sourcesContent":["/**\r\n * Use this file for JavaScript code that you want to run in the front-end\r\n * on posts/pages that contain this block.\r\n *\r\n * When this file is defined as the value of the `viewScript` property\r\n * in `block.json` it will be enqueued on the front end of the site.\r\n *\r\n * Example:\r\n *\r\n * ```js\r\n * {\r\n *   \"viewScript\": \"file:./view.js\"\r\n * }\r\n * ```\r\n *\r\n * If you're not making any changes to this file because your project doesn't need any\r\n * JavaScript running in the front-end, then you should delete this file and remove\r\n * the `viewScript` property from `block.json`.\r\n *\r\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\r\n */\r\n// import { getFromApi } from \"./utilities/getFromApi\";\r\n// import { appColors } from \"./utilities/appColors\";\r\n\r\nfunction main() {\r\n\t// const data = getFromApi('wp', 'major-orders').then((data) => {\r\n\t// \tconsole.log('Fetched data from ', data.updated_at);\r\n\r\n\t// \t// calculate time since last update 'updated_at' \"2024-04-30 21:47:46\"\r\n\t// \tconst lastUpdate = new Date(data.updated_at);\r\n\t// \tconst now = new Date();\r\n\t// \tconst timeSinceLastUpdate = now - lastUpdate;\r\n\r\n\t// \tconst forceUpdate = true;\r\n\t\t\r\n\t// \tif (timeSinceLastUpdate / 1000 / 60 / 60 > 1 || forceUpdate) {\r\n\t// \t\tconsole.log('Data is older than 1 hour or force update is enabled. Updating...');\r\n\t// \t\t// fetch new data\r\n\t// \t\tgetFromApi('app', 'major-orders').then((data) => {\r\n\t// \t\t\tconsole.log('Fetched new data from ', data.updated_at);\r\n\t// \t\t})\r\n\t// \t}\r\n\r\n\t// })\r\n\r\n\r\n\r\n\r\n\tconst url = \"https://helldiverstrainingmanual.com/api/v1/war/major-orders\";\r\n\tconst campaignStatus =\r\n\t\t\"https://helldiverstrainingmanual.com/api/v1/war/campaign\";\r\n\tconst automatonRed = \"#ef7679\";\r\n\tconst terminidOrange = \"#ffa300\";\r\n\t// const data = localGet();\r\n\t// console.log(data);\r\n\tfetch(url)\r\n\t\t.then((response) => response.json())\r\n\t\t.then((data) => {\r\n\t\t\tdata.forEach((order) => {\r\n\t\t\t\tfetch(campaignStatus)\r\n\t\t\t\t\t.then((response) => response.json())\r\n\t\t\t\t\t.then((campaignData) => {\r\n\t\t\t\t\t\tconst planetGroup = document.querySelector(\".mo-planets-group\");\r\n\t\t\t\t\t\tplanetGroup.innerHTML = \"\";\r\n\r\n\t\t\t\t\t\t// reorder planets by planet name\r\n\t\t\t\t\t\tcampaignData.sort((a, b) => {\r\n\t\t\t\t\t\t\tif (a.name < b.name) {\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (a.name > b.name) {\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// create planet elements\r\n\t\t\t\t\t\tcampaignData.forEach((planet) => {\r\n\t\t\t\t\t\t\tconsole.log(planet);\r\n\t\t\t\t\t\t\tif (planet.majorOrder) {\r\n\t\t\t\t\t\t\t\tconst factionColor =\r\n\t\t\t\t\t\t\t\t\tplanet.faction === \"Terminids\"\r\n\t\t\t\t\t\t\t\t\t\t? terminidOrange\r\n\t\t\t\t\t\t\t\t\t\t: automatonRed;\r\n\t\t\t\t\t\t\t\tconst requirementGroup = document.querySelector(\r\n\t\t\t\t\t\t\t\t\t\".mo-requirements-group\",\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\trequirementGroup.style.color = factionColor;\r\n\t\t\t\t\t\t\t\tconst planetElement = document.createElement(\"div\");\r\n\t\t\t\t\t\t\t\tplanetElement.classList.add(\"mo-planet\");\r\n\r\n\t\t\t\t\t\t\t\tconst planetName = document.createElement(\"div\");\r\n\t\t\t\t\t\t\t\tplanetName.classList.add(\"mo-planet-name\");\r\n\t\t\t\t\t\t\t\tplanetName.style.color = factionColor;\r\n\t\t\t\t\t\t\t\tplanetName.innerHTML = planet.name.toUpperCase();\r\n\r\n\t\t\t\t\t\t\t\tconst planetProgress = document.createElement(\"div\");\r\n\t\t\t\t\t\t\t\tplanetProgress.classList.add(\"mo-planet-progress\");\r\n\t\t\t\t\t\t\t\tplanetProgress.style.backgroundColor = factionColor;\r\n\t\t\t\t\t\t\t\tlet truncatedPercentage = planet.percentage.toFixed(2);\r\n\r\n\t\t\t\t\t\t\t\t// Set progress bar width and apply styling\r\n\t\t\t\t\t\t\t\tconst progressBarAfter = document.createElement(\"div\");\r\n\t\t\t\t\t\t\t\tprogressBarAfter.innerHTML = `${truncatedPercentage}%`;\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.width = `${planet.percentage}%`;\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.height = \"100%\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.backgroundColor = \"#9fcce1\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.borderRadius = \"5px\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.position = \"absolute\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.top = \"0\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.left = \"0\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.color = \"black\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.display = \"flex\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.justifyContent = \"flex-start\";\r\n\t\t\t\t\t\t\t\tprogressBarAfter.style.paddingLeft = \"5px\";\r\n\t\t\t\t\t\t\t\tplanetProgress.appendChild(progressBarAfter);\r\n\t\t\t\t\t\t\t\tplanetElement.appendChild(planetName);\r\n\t\t\t\t\t\t\t\tplanetElement.appendChild(planetProgress);\r\n\t\t\t\t\t\t\t\tplanetGroup.appendChild(planetElement);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// set grid-template-columns to valid planets\r\n\t\t\t\t\t\tif (campaignData.length > 1) {\r\n\t\t\t\t\t\t\tlet planetsInCampaign = 0;\r\n\t\t\t\t\t\t\tcampaignData.forEach((planet) => {\r\n\t\t\t\t\t\t\t\tif (planet.majorOrder) {\r\n\t\t\t\t\t\t\t\t\tplanetsInCampaign++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tplanetGroup.style.gridTemplateColumns = `repeat(${planetsInCampaign}, 1fr)`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tconst bodyElement = document.querySelector(\".mo-body\");\r\n\t\t\tconst taskDescription = document.querySelector(\".mo-requirements p\");\r\n\t\t\tconst rewardsElement = document.querySelector(\".reward\");\r\n\r\n\t\t\tbodyElement.innerHTML = data[0].setting.overrideBrief;\r\n\t\t\ttaskDescription.innerHTML = data[0].setting.taskDescription;\r\n\t\t\trewardsElement.innerHTML = data[0].setting.reward.amount;\r\n\r\n\t\t\tconst timeRemainingElement = document.querySelector(\r\n\t\t\t\t\".mo-timer-countdown\",\r\n\t\t\t);\r\n\t\t\tconst timeRemaining = data[0].expiresIn;\r\n\t\t\tconst remainingHours = Math.floor(timeRemaining / 3600) % 24;\r\n\t\t\tconst remainingDays = Math.floor(timeRemaining / 86400);\r\n\r\n\t\t\ttimeRemainingElement.innerHTML = `${remainingDays}D ${remainingHours}H`;\r\n\t\t});\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", main);\r\n"],"names":["main","url","campaignStatus","automatonRed","terminidOrange","fetch","then","response","json","data","forEach","order","campaignData","planetGroup","document","querySelector","innerHTML","sort","a","b","name","planet","console","log","majorOrder","factionColor","faction","requirementGroup","style","color","planetElement","createElement","classList","add","planetName","toUpperCase","planetProgress","backgroundColor","truncatedPercentage","percentage","toFixed","progressBarAfter","width","height","borderRadius","position","top","left","display","justifyContent","paddingLeft","appendChild","length","planetsInCampaign","gridTemplateColumns","bodyElement","taskDescription","rewardsElement","setting","overrideBrief","reward","amount","timeRemainingElement","timeRemaining","expiresIn","remainingHours","Math","floor","remainingDays","addEventListener"],"sourceRoot":""}